(window.webpackJsonp=window.webpackJsonp||[]).push([[108,77],{"4G6/":function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var i=60,a=60*i,r=24*a,o=7*r,s=4*o+2*r,l=3,d=/([a-zA-Z])([0-9])/gi,c=/([0-9])([a-zA-Z])/gi,u=/^mo(nths?)?/,p=/^w(eeks?)?/,m=/^d(ays?)?/,f=/^h(ours?)?/,h=/^m(inutes?)?/;function v(e){if(!e)return"0s";var t=e,n="";if(t>s){var l=Math.floor(t/s);t-=l*s,n+=l+"mo"}if(t>o){var d=Math.floor(t/o);t-=d*o,n+=d+"w"}if(t>r){var c=Math.floor(t/r);t-=c*r,n+=c+"d"}if(t>a){var u=Math.floor(t/a);t-=u*a,n+=u+"h"}if(t>i){var p=Math.floor(t/i);t-=p*i,n+=p+"m"}return t>0&&(n+=t+"s"),n}function b(e){var t=0,n=e.replace(d,"$1 $2").replace(c,"$1 $2").split(/\W+/);if(n.length%2!=0)return null;for(var v=0;v<n.length;v+=2){var b=n[v],g=parseInt(b,10);if(Number.isNaN(g)||b.length>l)return null;var k=n[v+1];if(k.match(u))t+=g*s;else if(k.match(p))t+=g*o;else if(k.match(m))t+=g*r;else if(k.match(f))t+=g*a;else{if(!k.match(h))return null;t+=g*i}}return t}},"4L7N":function(e,t,n){"use strict";var i=n("/MKj"),a=n("kRBY"),r=n("mrSG"),o=n("q1tI"),s=n("VwyG"),l=n("X7Ac"),d=n("yR8l"),c=n("MLDe"),u=n("v8tf"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.data.clip,n="";if(t&&Array.isArray(t.videoQualities)&&t.videoQualities.length){var i=t.videoQualities[0];i&&i.sourceURL&&(n=i.sourceURL)}var a=this.props,r=a.broadcasterId,d=a.broadcasterLogin,u=a.forceShow;return o.createElement(s.a,{ownerLogin:this.props.broadcasterLogin,permittedRoles:{editor:!0,staff:!0}},(function(i){var a=i.permitted;return n&&(a||u)?o.createElement(l.a,{type:l.c.Download,text:e.props.slug,url:n,onShareClick:t?Object(c.c)(t.id,t.game&&t.game.name,r,d,e.props.pageType):void 0}):null}))},t}(o.Component),m=Object(d.a)(u)(p);var f=Object(i.b)((function(e){var t=Object(a.e)(e);return{userLogin:t?t.login:""}}))(m);n.d(t,"a",(function(){return f}))},"4w0E":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_BanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minTimeoutDurationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maxTimeoutDurationSeconds"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:289}};n.loc.source={body:"mutation Chat_BanUserFromChatRoom($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nban {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\nerror {\ncode\nminTimeoutDurationSeconds\nmaxTimeoutDurationSeconds\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_BanUserFromChatRoom=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_BanUserFromChatRoom")},"9a8W":function(e,t,n){},DJtx:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Clips_ModalDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:143}};n.loc.source={body:"query Clips_ModalDelete($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ncurator {\nid\nlogin\n}\nthumbnailURL\ncreatedAt\nviewCount\ntitle\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Clips_ModalDelete=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Clips_ModalDelete")},HzXE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRoomBanStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRoomBanStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}},{kind:"Argument",name:{kind:"Name",value:"userID"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"targetUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}},{kind:"Argument",name:{kind:"Name",value:"lookupType"},value:{kind:"EnumValue",value:"ALL"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:299}};n.loc.source={body:"query ChatRoomBanStatus($targetUserID: ID! $channelID: ID!) {\nchatRoomBanStatus(channelID: $channelID userID: $targetUserID) {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\ntargetUser: user (id: $targetUserID lookupType: ALL) {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatRoomBanStatus=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatRoomBanStatus")},MdYN:function(e,t,n){"use strict";n.r(t);var i,a=n("/MKj"),r=n("ANjH"),o=n("XDCx"),s=n("mrSG"),l=n("TSYQ"),d=n("q1tI"),c=n("/7QA"),u=n("cZKs"),p=n("DMoW"),m=n("jsEL"),f=n("GnwI"),h=n("/HY+"),v=n("8Ad5"),b=n("u5aL"),g=n("uX80"),k=n("wbMx"),S=n("Jxh/"),y=n("kduP"),C=n("f00E"),w=n("+GjP"),E=n("vhpE"),D=n("bq0i"),N=n("yR8l"),O=n("4rCz"),M=n("ndwU");!function(e){e[e.View=0]="View",e[e.Report=1]="Report",e[e.Delete=2]="Delete",e[e.DeleteAll=3]="DeleteAll",e[e.Ban=4]="Ban",e[e.Timeout=5]="Timeout"}(i||(i={}));var j=n("i4Ys"),T=n("sUnt"),F=n("dEDE"),I=n("C7sF"),_=n("ygYM"),U=n("WsU7"),B=[i.Delete,i.DeleteAll],A=function(e){function t(t){var n=e.call(this,t)||this;return n.clipsMaintenance=Object(M.a)(),n.renderMenuItem=function(e){var t=n.menuData.get(e);return e&&t?d.createElement(j.a,{key:t.display,onClick:t.destinationHandler,"data-a-target":"clip-moderation-button-"+t.display,disabled:n.clipsMaintenance&&B.includes(e)},d.createElement(T.a,{padding:{x:1,y:.5}},t.display)):null},n.menuData=new Map([[i.Report,{display:Object(O.d)("Report","ModerationMenu"),destinationHandler:function(){return n.props.updateModalViewState(i.Report)}}],[i.Delete,{display:Object(O.d)("Delete","ModerationMenu"),destinationHandler:function(){return n.props.updateModalViewState(i.Delete)}}],[i.DeleteAll,{display:Object(O.d)("Delete All Clips from Video","ModerationMenu"),destinationHandler:function(){return n.props.updateModalViewState(i.DeleteAll)}}],[i.Ban,{display:Object(O.d)("Ban User","ModerationMenu"),destinationHandler:function(){return n.props.updateModalViewState(i.Ban)}}],[i.Timeout,{display:Object(O.d)("Timeout User (24 hr)","ModerationMenu"),destinationHandler:function(){return n.props.updateModalViewState(i.Timeout)}}]]),n}return Object(s.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=this.props.data,t=this.props.clip;if(!e||!e.currentUser)return null;var n=e.currentUser.isStaff||e.currentUser.isSiteAdmin,a=!!t.curator&&e.currentUser.id===t.curator.id,r=!!t.broadcaster&&e.currentUser.id===t.broadcaster.id,o=a||r||n,s=r||n,l=[i.Report];return o&&l.push(i.Delete),s&&(l.push(i.DeleteAll),t.curator&&t.broadcaster&&(l.push(i.Ban),l.push(i.Timeout))),d.createElement(T.a,{className:"moderation-menu"},d.createElement(D.a,null,d.createElement(F.a,{type:F.d.Secondary,icon:I.a.More,"aria-label":Object(O.d)("More Options","ModerationMenu"),"data-a-target":"moderation-menu-button"}),d.createElement(_.a,{direction:_.b.TopRight},d.createElement(T.a,{padding:{y:.5}},this.moderationMenuRender(l)))))},t.prototype.moderationMenuRender=function(e){var t=this;return e.map((function(e){return t.renderMenuItem(e)}))},t=Object(s.__decorate)([Object(N.a)(U),Object(f.withLatencyTracking)("ModerationMenu")],t)}(d.Component),L=n("MLDe"),x=n("Jsra"),R=n("Ws8v"),V=n("yymn"),P=n("fPaz"),q=n("+80q"),G=n("hnjF"),H=n("7uM4"),Q=(n("n/Dx"),2e3),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isShowingBalloon:!1,playerRefID:Object(C.b)()},t.timeoutID=null,t.copyClipURL=function(){var e;try{e=Object(S.a)(t.props.clip.url)}catch(e){return void c.k.warn("Failed to copy",e)}e&&(t.setState({isShowingBalloon:!0}),t.timeoutID=setTimeout((function(){t.setState({isShowingBalloon:!1})}),Q),Object(L.c)(t.props.clip.id,t.props.clip.game&&t.props.clip.game.name,t.props.clip.broadcaster&&t.props.clip.broadcaster.id,t.props.clip.broadcaster&&t.props.clip.broadcaster.login,t.props.pageType)(k.c.CopyInput))},t.dismissBalloon=function(){t.setState({isShowingBalloon:!1}),t.timeoutID&&(clearTimeout(t.timeoutID),t.timeoutID=null)},t}return Object(s.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.reportPlayerInstanceStarted(this.state.playerRefID)},t.prototype.render=function(){var e,t=this.props.clip.broadcaster&&d.createElement(x.a,{linkTo:"/"+this.props.clip.broadcaster.login,onClick:this.props.closeModal,"data-a-target":"clip-modal-broadcaster-link"},this.props.clip.broadcaster.login);return e=this.props.clip.game&&t?Object(c.d)("{broadcaster} playing {game}",{broadcaster:t,game:d.createElement(x.a,{linkTo:""+Object(y.a)(this.props.clip.game.name),onClick:this.props.closeModal,"data-a-target":"clip-modal-game-link"},this.props.clip.game.name)},"ClipsViewModalContent"):t,d.createElement(R.a,{className:"clips-view-modal-content",background:V.d.Base},d.createElement(T.a,{padding:{bottom:2}},d.createElement(P.b,{ratio:P.c.Aspect16x9},d.createElement("iframe",{src:Object(w.g)(this.props.clip.embedURL,{parent:"twitch.tv"}),width:"100%",height:"100%",allowFullScreen:!0}))),d.createElement(T.a,{padding:{x:2,bottom:2}},d.createElement(T.a,{display:V.g.Flex,flexWrap:V.i.NoWrap},d.createElement(T.a,{flexGrow:1,margin:{right:1}},d.createElement(b.a,{onClickOut:this.dismissBalloon},d.createElement(g.a,{text:this.props.clip.url,icon:!0,iconAsset:I.a.Link,onSelection:this.copyClipURL,"data-a-target":"clip-share-input"},d.createElement(_.a,{show:this.state.isShowingBalloon,direction:_.b.TopRight},d.createElement(j.a,{onClick:this.dismissBalloon},d.createElement(T.a,{padding:1},d.createElement(q.a,{bold:!0},Object(c.d)("Link copied to clipboard","ClipsViewModalContent")))))))),d.createElement(E.a,{clip:this.props.clip,pageType:this.props.pageType}),d.createElement(A,{clip:this.props.clip,updateModalViewState:this.props.updateModalViewState}))),d.createElement(T.a,{padding:{x:2,bottom:2},display:V.g.Flex,flexWrap:V.i.NoWrap,justifyContent:V.l.Between,fullWidth:!0,overflow:V.m.Hidden},d.createElement(T.a,{flexGrow:1,ellipsis:!0},d.createElement(G.a,{ellipsis:!0},d.createElement(R.a,{display:V.g.Flex,fontSize:V.j.Size5},d.createElement(T.a,{ellipsis:!0},this.props.clip.title),d.createElement(T.a,{flexShrink:0},d.createElement(q.a,{type:q.e.Span,color:V.f.Alt2}," •"," ",Object(c.d)("{created, date, medium}",{created:new Date(this.props.clip.createdAt)},"ClipsViewModalContent"))))),d.createElement(G.a,{ellipsis:!0},d.createElement(R.a,{color:V.f.Alt2},e,e&&!!this.props.clip.curator&&d.createElement("span",null," • "),this.props.clip.curator&&Object(c.d)("Clipped by {curator}",{curator:d.createElement(x.a,{linkTo:"/"+this.props.clip.curator.login,onClick:this.props.closeModal,"data-a-target":"clip-modal-curator-link"},this.props.clip.curator.login)},"ClipsViewModalContent")))),d.createElement(R.a,{display:V.g.Flex,padding:{bottom:2,left:2},fontSize:V.j.Size5,color:V.f.Alt2,flexShrink:0},d.createElement(T.a,{margin:{right:.5},alignItems:V.b.Center,display:V.g.Flex},d.createElement(H.a,{asset:I.a.GlyphViews})),Object(c.d)("{viewCount, number} views",{viewCount:this.props.clip.viewCount},"ClipsViewModalContent"))))},t=Object(s.__decorate)([Object(f.withLatencyTracking)("ClipsViewModalContent")],t)}(d.Component),$=n("S1Za");var z=Object(a.b)(null,(function(e){return Object(r.b)({reportPlayerInstanceStarted:$.b},e)}))(W),Y=n("7d/q"),X=(n("9a8W"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onKeyDown=function(e){var n=e.charCode||e.keyCode;n===v.a.Left?t.updateClipBackward():n===v.a.Right&&t.updateClipForward()},t.updateClipForward=function(){t.updateClipIndex(t.props.clipIndex+1)},t.updateClipBackward=function(){t.updateClipIndex(t.props.clipIndex-1)},t}return Object(s.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.setUpArrowListeners()},t.prototype.render=function(){var e=null,t=null;this.props.clipIndex>0&&(e=d.createElement(T.a,{position:V.n.Absolute,display:V.g.Flex,alignItems:V.b.Stretch,className:"clip-carousel-button clip-carousel-button--left"},d.createElement(Y.a,{"aria-label":Object(c.d)("Previous clip","ClipsViewModalNavigation"),overlay:!0,icon:I.a.AngleLeft,onClick:this.updateClipBackward,"data-test-selector":"clips-view-modal-navigation-back"})));var n=this.props.getClips();return this.props.loadMoreClips&&n.length-this.props.clipIndex<4&&this.props.loadMoreClips(),this.props.clipIndex<n.length-1&&(t=d.createElement(T.a,{position:V.n.Absolute,display:V.g.Flex,alignItems:V.b.Stretch,className:"clip-carousel-button clip-carousel-button--right"},d.createElement(Y.a,{"aria-label":Object(c.d)("Next clip","ClipsViewModalNavigation"),overlay:!0,icon:I.a.AngleRight,onClick:this.updateClipForward,"data-test-selector":"clips-view-modal-navigation-forward"}))),d.createElement(T.a,{className:"clips-view-modal-navigation"},e,d.createElement(z,{clip:this.props.clip,updateModalViewState:this.props.updateModalViewState,pageType:this.props.pageType,closeModal:this.props.closeModal}),t)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.onKeyDown)},t.prototype.setUpArrowListeners=function(){document.addEventListener("keydown",this.onKeyDown)},t.prototype.updateClipIndex=function(e){var t=Math.max(0,e),n=this.props.getClips();n.length-t<4&&this.props.loadMoreClips&&this.props.loadMoreClips(),t<n.length&&this.props.showModal(te,{getClips:this.props.getClips,clip:n[t],clipIndex:t,loadMoreClips:this.props.loadMoreClips,pageType:this.props.pageType})},t}(d.Component)),K=Object(f.withLatencyTracking)("ClipsViewModalNavigation")(X);var Z=Object(a.b)(null,(function(e){return Object(r.b)({showModal:o.e,closeModal:o.d},e)}))(K),J=(n("ygyh"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={modalView:i.View},t.setToViewState=function(){t.updateClipsModalViewState(i.View)},t.updateClipsModalViewState=function(e){t.setState({modalView:e})},t}return Object(s.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e,t,n=((e={})["clips-modal-view"]=!0,e["clips-modal-view--wide"]=!1,e);switch(this.state.modalView){case i.Report:t=d.createElement(h.a,{title:Object(c.d)("Report this Clip","ClipsViewModal"),reportContext:{contentType:p.Bd.CLIP_REPORT,contentID:this.props.clip.slug,targetUserID:this.props.clip.broadcaster&&this.props.clip.broadcaster.id||"",additionalTrackingID:this.props.clip.curator&&this.props.clip.curator.id||""},onClose:this.setToViewState});break;case i.Delete:t=d.createElement(m.ClipsModalDelete,{slug:this.props.clip.slug,onClose:this.setToViewState});break;case i.DeleteAll:t=d.createElement(m.ClipsModalDeleteAll,{slug:this.props.clip.slug,onClose:this.setToViewState});break;case i.Ban:case i.Timeout:if(this.props.clip.curator&&this.props.clip.broadcaster){t=d.createElement(m.ClipsModalBanUser,{targetUser:{displayName:this.props.clip.curator.displayName||"",login:this.props.clip.curator.login||""},broadcasterID:this.props.clip.broadcaster.id||"",isTemporary:this.state.modalView===i.Timeout,onClose:this.setToViewState});break}default:t=d.createElement(Z,{getClips:this.props.getClips,clip:this.props.clip,clipIndex:this.props.clipIndex,updateModalViewState:this.updateClipsModalViewState,loadMoreClips:this.props.loadMoreClips,pageType:this.props.pageType}),n["clips-modal-view--wide"]=!0}return d.createElement(T.a,{className:l(n)},t,d.createElement(u.a,{closeOnBackdropClick:!0,closeOnPageNavigation:!0}))},t}(d.Component)),ee=Object(f.withLatencyTracking)("ClipsViewModal")(J);var te=Object(a.b)(null,(function(e){return Object(r.b)({showModal:o.e},e)}))(ee);n.d(t,"ClipsViewModal",(function(){return te})),n.d(t,"PublicProps",(function(){}))},"Pub/":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("HzXE");function a(e,t,n){try{return e.readQuery({query:i,variables:{channelID:t,targetUserID:n}})}catch(e){}}},TVuH:function(e,t,n){},Vsf8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsModalDeleteAll_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:101}};n.loc.source={body:"query ClipsModalDeleteAll_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nvideo {\nid\n}\nbroadcast {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ClipsModalDeleteAll_Clip=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ClipsModalDeleteAll_Clip")},VwyG:function(e,t,n){"use strict";var i=n("/MKj"),a=n("kRBY"),r=n("mrSG"),o=n("q1tI"),s=n("ANjH"),l=n("/7QA"),d=n("yR8l"),c=n("GnwI"),u=n("nt5g"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null},t.logger=l.k.withCategory("role-restricted"),t}return Object(r.__extends)(t,e),t.prototype.componentDidUpdate=function(e){var t=e.data&&e.data.loading,n=this.props.data&&this.props.data.loading;if((!this.props.isLoggedIn||t&&!n)&&this.props.latencyTracking.reportInteractive(),this.props.isLoggedIn&&this.props.data&&(!e.data||e.data.error!==this.props.data.error)){var i=null;this.props.data.error?(i=new Error(this.props.data.error.toString()),this.logger.warn("Unable to retrieve data from GraphQL.",{err:i})):n||this.props.data.user&&this.props.data.currentUser||(i=new Error("Failed to fetch user information"),this.logger.warn("Failed to fetch user information.",{err:i})),this.setState({error:i})}},t.prototype.componentDidMount=function(){(!this.props.isLoggedIn||this.props.data&&!this.props.data.loading)&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e={loading:this.props.isLoggedIn,permitted:!1,roles:{staff:!1,editor:!1,owner:!1},error:this.state.error};if(this.props.isLoggedIn&&this.props.data){var t=function(e){var t=e.data,n={staff:!1,editor:!1,owner:!1};t&&!t.error&&!t.loading&&t.user&&t.currentUser&&(n.staff=!(!t.currentUser.roles||!t.currentUser.roles.isStaff),n.editor=!(!t.user.self||!t.user.self.isEditor),n.owner=t.user.id===t.currentUser.id);return n}(this.props);e=Object(r.__assign)(Object(r.__assign)({},e),{loading:this.props.data.loading,permitted:m(t,this.props.permittedRoles),roles:t})}return o.createElement(o.Fragment,null,this.props.children(e))},t}(o.Component);function m(e,t){return!!e.owner||(!(!e.staff||!t.staff)||!(!e.editor||!t.editor))}var f=Object(s.d)(Object(d.a)(u,{options:function(e){return{variables:{contentOwnerLogin:e.ownerLogin}}},skip:function(e){return!e.isLoggedIn}}),Object(c.withLatencyTracking)("RoleRestricted"))(p);var h=Object(i.b)((function(e){return{isLoggedIn:Object(a.f)(e)}}))(f);n.d(t,"a",(function(){return h}))},WsU7:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ModerationMenu_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:75}};n.loc.source={body:"query ModerationMenu_CurrentUser {\ncurrentUser {\nid\nisSiteAdmin\nisStaff\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ModerationMenu_CurrentUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ModerationMenu_CurrentUser")},iyGE:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("mrSG"),a=n("yR8l"),r=n("Pub/"),o=n("HzXE"),s=n("4G6/"),l=n("4w0E");function d(e){var t=this;return Object(a.b)(l,{props:function(n){return{banUserMutation:function(a,l,d){return void 0===l&&(l=null),void 0===d&&(d=null),Object(i.__awaiter)(t,void 0,void 0,(function(){var t,c;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),c=null,"number"==typeof l?c=Object(s.a)(l):"string"==typeof l&&(c=l),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:a,expiresIn:c,reason:d}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.banUserFromChatRoom&&t.data.banUserFromChatRoom.ban&&t.data.banUserFromChatRoom.ban.bannedUser&&t.data.banUserFromChatRoom.ban.bannedUser.id){var a=Object(r.a)(e,n,t.data.banUserFromChatRoom.ban.bannedUser.id);if(!a)return;e.writeQuery({query:o,variables:{targetUserID:t.data.banUserFromChatRoom.ban.bannedUser.id,channelID:n},data:Object(i.__assign)(Object(i.__assign)({},a),{chatRoomBanStatus:{isPermanent:t.data.banUserFromChatRoom.ban.isPermanent,__typename:"ChatRoomBanStatus"}})})}}(e,n,t)}})];case 2:return[2,u.sent().data];case 3:throw u.sent(),new Error("Unable to ban user");case 4:return[3,6];case 5:throw new Error("Ban user mutation is not ready");case 6:return[2]}}))}))}}}})}},jsEL:function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("u5aL"),s=n("Ws8v"),l=n("yymn"),d=n("+80q"),c=n("sUnt"),u=n("dEDE"),p=n("XQbB"),m=(n("wC0O"),{TITLE:"clips-modal-title",MAIN_BODY:"clips-modal-main-body",SUCCESS_BODY:"clips-modal-success-body",ERROR_BODY:"clips-modal-error-body",SUBMIT_BUTTON:"clips-modal-submit-button",CANCEL_BUTTON:"clips-modal-cancel-button"}),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSuccess=function(){return t.props.successContent?a.createElement(s.a,{"data-test-selector":m.SUCCESS_BODY,padding:{x:2,y:1},margin:{bottom:1},background:l.d.Alt,fullWidth:!0},a.createElement(d.a,{type:d.e.Strong},t.props.successContent)):null},t.renderError=function(){return t.props.errorContent?a.createElement(s.a,{"data-test-selector":m.ERROR_BODY,padding:{x:1,y:.5},margin:{bottom:1},borderMarked:!0,background:l.d.Alt,fullWidth:!0},a.createElement(d.a,{type:d.e.Strong,color:l.f.Error},t.props.errorContent)):null},t.onSubmit=function(){t.props.onSubmit()},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.successContent?a.createElement(o.a,{onClickOut:this.props.onClose},a.createElement(s.a,{padding:2,background:l.d.Base,className:"clip-modal"},this.renderSuccess(),a.createElement(c.a,{display:l.g.Flex,justifyContent:l.l.Center},a.createElement(c.a,{margin:{x:1}},a.createElement(u.a,{"data-test-selector":m.CANCEL_BUTTON,onClick:this.props.onClose},Object(r.d)("Close","ClipsModal")))))):a.createElement(o.a,{onClickOut:this.props.onClose},a.createElement(s.a,{padding:2,background:l.d.Base,className:"clip-modal"},a.createElement(s.a,{"data-test-selector":m.TITLE,borderBottom:!0,margin:{bottom:2},padding:{bottom:1}},this.props.title),a.createElement(s.a,{"data-test-selector":m.MAIN_BODY,borderBottom:!0,margin:{bottom:2},padding:{bottom:2}},this.renderError(),this.props.body),a.createElement(c.a,{display:l.g.Flex,justifyContent:l.l.Center},a.createElement(c.a,{margin:{x:1}},a.createElement(u.a,{"data-test-selector":m.CANCEL_BUTTON,type:u.d.Text,onClick:this.props.onClose},Object(r.d)("Cancel","ClipsModal"))),a.createElement(c.a,{margin:{x:1}},a.createElement(u.a,{"data-test-selector":m.SUBMIT_BUTTON,type:this.props.buttonType?this.props.buttonType:u.d.Primary,onClick:this.onSubmit,disabled:this.props.submitDisabled},this.props.buttonContent),this.props.isLoading&&a.createElement(p.a,{delay:0})))))},t}(a.Component),h=n("atdg"),v=n("iyGE"),b=n("GnwI"),g=86400,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!1,hasErrored:!1,hasSucceeded:!1},t.renderTitle=function(){return t.props.isTemporary?a.createElement(d.a,{id:h.a,type:d.e.H5,ellipsis:!0},Object(r.d)("Timeout this Clip Creator for 24 hours from Your Channel","ClipsModalBanUser")):a.createElement(d.a,{type:d.e.H5,ellipsis:!0},Object(r.d)("Ban this Clip Creator from Your Channel","ClipsModalBanUser"))},t.renderBodyText=function(){return t.props.isTemporary?a.createElement(d.a,null,Object(r.d)("{clipCreator} will temporarily be timed out from creating clips and chatting in your channel for 24 hours.",{clipCreator:t.props.targetUser.displayName},"ClipsModalBanUser")):a.createElement(d.a,null,Object(r.d)("{clipCreator} will be permanently banned from creating clips and chatting in your channel.",{clipCreator:t.props.targetUser.displayName},"ClipsModalBanUser"))},t.renderButtonText=function(){return t.props.isTemporary?Object(r.d)("Timeout User","ClipsModalBanUser"):Object(r.d)("Ban User","ClipsModalBanUser")},t.renderSuccess=function(){return t.state.hasSucceeded?Object(r.d)("Success!","ClipsModalBanUser"):null},t.renderFailure=function(){return t.state.hasErrored?t.props.isTemporary?Object(r.d)("There was a problem timing out this clip creator","ClipsModalBanUser"):Object(r.d)("There was a problem banning this clip creator","ClipsModalBanUser"):null},t.banUser=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t,n,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e=this.props.targetUser.login,t=this.props.isTemporary?this.props.banUserMutation(e,g):this.props.banUserMutation(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t];case 2:return(n=i.sent())?(!(a=n.banUserFromChatRoom)||a.error?this.setState({hasErrored:!0,isLoading:!1}):this.setState({hasSucceeded:!0,isLoading:!1}),[3,4]):(this.setState({hasErrored:!0,isLoading:!1}),[2]);case 3:return i.sent(),this.setState({hasErrored:!0,isLoading:!1}),[3,4];case 4:return[2]}}))}))},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return a.createElement(f,{onSubmit:this.banUser,onClose:this.props.onClose,title:this.renderTitle(),body:this.renderBodyText(),buttonContent:this.renderButtonText(),buttonType:u.d.Alert,submitDisabled:this.state.isLoading||this.state.hasSucceeded,successContent:this.renderSuccess(),errorContent:this.renderFailure(),isLoading:this.state.isLoading})},t}(a.Component),S=Object(b.withLatencyTracking)("ClipsModalBanUser")(Object(v.a)((function(e){return{channelID:e.broadcasterID}}))(k)),y=n("ANjH"),C=n("yR8l"),w=n("IZXT"),E=n("vUXZ");function D(e){return Object(C.a)(E,e)}var N=n("fPaz"),O=n("DJtx"),M=(n("n9Ey"),{isLoading:!1,hasErrored:!1,hasSucceeded:!1}),j=function(e){function t(t){var n=e.call(this,t)||this;return n.onDeleteClick=function(){return Object(i.__awaiter)(n,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),this.props.data.clip?[4,this.props.deleteClip(this.props.slug)]:[2];case 2:return e.sent(),this.setState({isLoading:!1,hasSucceeded:!0}),[3,4];case 3:return e.sent(),this.setState({isLoading:!1,hasErrored:!0}),[3,4];case 4:return[2]}}))}))},n.state=M,n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=[a.createElement(d.a,{id:h.a,key:"title",type:d.e.H4},Object(r.d)("Delete This Clip","ClipsModalDelete")),a.createElement(c.a,{key:"message",margin:{top:1}},a.createElement(d.a,{type:d.e.P,color:l.f.Alt2},Object(r.d)("This clip will be permanently deleted.","ClipsModalDelete")))];if(!this.props.data.clip)return null;var t=null;this.props.data.clip.curator&&this.props.data.clip.curator.login&&(t=a.createElement("span",null," • ",Object(r.d)("Clipped by {curator}",{curator:this.props.data.clip.curator.login},"ClipsModalDelete")));var n=a.createElement(s.a,{display:l.g.Flex,flexWrap:l.i.NoWrap},a.createElement(c.a,{className:"clips-modal-delete__thumb",margin:{right:1}},a.createElement(N.b,{ratio:N.c.Aspect16x9},a.createElement("img",{src:this.props.data.clip.thumbnailURL}))),a.createElement(c.a,null,a.createElement(d.a,{type:d.e.H5},this.props.data.clip.title),a.createElement(d.a,{color:l.f.Alt2},Object(r.d)("{created, date, medium}",{created:new Date(this.props.data.clip.createdAt)},"ClipsModalDelete"),t),a.createElement(d.a,{color:l.f.Alt2},Object(r.d)("{viewCount, number} views",{viewCount:this.props.data.clip.viewCount},"ClipsModalDelete"))));return a.createElement(f,{onSubmit:this.onDeleteClick,onClose:this.props.onClose,title:e,body:n,buttonContent:Object(r.d)("Delete","ClipsModalDelete"),buttonType:u.d.Alert,submitDisabled:this.state.hasSucceeded||this.state.isLoading,successContent:this.state.hasSucceeded?Object(r.d)("Success!","ClipsModalDelete"):null,errorContent:this.state.hasErrored?Object(r.d)("There was a problem deleting this clip.","ClipsModalDelete"):null,isLoading:this.state.isLoading})},t}(a.Component),T=Object(y.d)(Object(C.a)(O),D({props:function(e){return{deleteClip:function(t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!e.mutate)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.mutate({variables:{input:{slugs:[t]}}})];case 2:return i.sent(),e.ownProps.onDelete&&e.ownProps.onDelete(t),[3,4];case 3:throw n=i.sent(),Object(w.d)()?r.k.warn("Failed to delete clip"):r.k.errorAndReport(n,"Failed to delete clip"),n;case 4:return[2]}}))}))}}}}))(j),F=n("Vsf8"),I={isLoading:!1,hasErrored:!1,hasSucceeded:!1},_=function(e){function t(t){var n=e.call(this,t)||this;return n.deleteAll=function(){return Object(i.__awaiter)(n,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.deleteAllClips(this.props.broadcastID,this.props.videoID)];case 2:return e.sent(),this.setState({isLoading:!1,hasSucceeded:!0}),[3,4];case 3:return e.sent(),this.setState({isLoading:!1,hasErrored:!0}),[3,4];case 4:return[2]}}))}))},n.renderSuccess=function(){return n.state.hasSucceeded?Object(r.d)("A request has been made to delete the clip. Please wait a few minutes for this to take effect.","ClipsModalDeleteAll"):null},n.renderFailure=function(){return n.state.hasErrored?Object(r.d)("There was a problem deleting this clip.","ClipsModalDeleteAll"):null},n.state=I,n}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=a.createElement(d.a,{type:d.e.P},Object(r.d)("This clip and all other clips created from the same video will be permanently deleted.","ClipsModalDeleteAll"));return a.createElement(f,{onSubmit:this.deleteAll,onClose:this.props.onClose,title:a.createElement(d.a,{id:h.a,type:d.e.H4},Object(r.d)("Delete All Clips from Related Video","ClipsModalDeleteAll")),body:e,buttonContent:Object(r.d)("Delete","ClipsModalDeleteAll"),buttonType:u.d.Alert,submitDisabled:this.state.isLoading||this.state.hasSucceeded||""===this.props.broadcastID,isLoading:this.state.isLoading,successContent:this.renderSuccess(),errorContent:this.renderFailure()})},t}(a.Component),U=Object(y.d)(Object(b.withLatencyTracking)("ClipsModalDeleteAll"),D({props:function(e){return{deleteAllClips:function(t,n){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var a,o,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!e.mutate)return[3,8];i.label=1;case 1:return i.trys.push([1,7,,8]),a=void 0,n?[4,e.mutate({variables:{input:{videoID:n}}})]:[3,3];case 2:return o=i.sent(),a=o.data,[3,6];case 3:return t?[4,e.mutate({variables:{input:{broadcastID:t}}})]:[3,5];case 4:return o=i.sent(),a=o.data,[3,6];case 5:throw new Error("Invalid broadcastID specified for deleteAllClips");case 6:return e.ownProps.onDeleteAll&&a&&a.deleteClips&&a.deleteClips.clips&&e.ownProps.onDeleteAll(a.deleteClips.clips),[3,8];case 7:throw s=i.sent(),Object(w.d)()?r.k.warn("Failed to delete clips from VOD"):r.k.errorAndReport(s,"Failed to delete clips from VOD"),s;case 8:return[2]}}))}))}}}}),Object(C.a)(F,{props:function(e){var t=e.data.clip;return t?{videoID:t.video?t.video.id:null,broadcastID:t.broadcast&&t.broadcast.id||""}:{videoID:null,broadcastID:""}},options:function(e){return{variables:{slug:e.slug}}}}))(_),B={isLoading:!1,hasErrored:!1,hasSucceeded:!1},A=function(e){function t(t){var n=e.call(this,t)||this;return n.renderSuccess=function(){return n.state.hasSucceeded?Object(r.d)("Clips successfully deleted.","ClipsModalBatchDelete"):null},n.renderError=function(){return n.state.hasErrored?Object(r.d)("There was a problem deleting this clip.","ClipsModalBatchDelete"):null},n.onDeleteClick=function(){return Object(i.__awaiter)(n,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.deleteClips()];case 2:return e.sent(),this.setState({hasSucceeded:!0,isLoading:!1}),[3,4];case 3:return e.sent(),this.setState({hasErrored:!0,isLoading:!1}),[3,4];case 4:return[2]}}))}))},n.state=B,n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=a.createElement(d.a,{id:h.a,type:d.e.H4},Object(r.d)("Delete these clips?","ClipsModalBatchDelete")),t=a.createElement(d.a,{type:d.e.P},Object(r.d)("These clips will be permanently deleted. Are you sure?","ClipsModalBatchDelete"));return a.createElement(f,{onSubmit:this.onDeleteClick,onClose:this.props.onClose,title:e,body:t,buttonContent:Object(r.d)("Delete","ClipsModalBatchDelete"),buttonType:u.d.Alert,submitDisabled:this.state.hasSucceeded||this.state.isLoading,isLoading:this.state.isLoading,successContent:this.renderSuccess(),errorContent:this.renderError()})},t}(a.Component),L=D({props:function(e){return{deleteClips:function(){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:if(!e.mutate)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.mutate({variables:{input:{slugs:e.ownProps.clipSlugs}}})];case 2:return n.sent(),e.ownProps.onBatchDelete&&e.ownProps.onBatchDelete(),[3,4];case 3:throw t=n.sent(),Object(w.d)()?r.k.warn("Failed to delete clips"):r.k.errorAndReport(t,"Failed to delete clips"),t;case 4:return[2]}}))}))}}}})(A);n.d(t,"ClipsModal",(function(){return f})),n.d(t,"ClipsModalBanUser",(function(){return S})),n.d(t,"ClipsModalDelete",(function(){return T})),n.d(t,"ClipsModalDeleteAll",(function(){return U})),n.d(t,"ClipsModalBatchDelete",(function(){return L}))},"n/Dx":function(e,t,n){},n9Ey:function(e,t,n){},ndwU:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("/7QA"),a=n("D7An");function r(){return"variant1"===i.p.experiments.getAndTrackAssignment(a.c.ClipsOnTheBrain)}},nt5g:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoleRestricted"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:147}};n.loc.source={body:"query RoleRestricted($contentOwnerLogin: String!) {\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nuser(login: $contentOwnerLogin) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.RoleRestricted=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"RoleRestricted")},uX80:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("mrSG"),a=n("q1tI"),r=n("ANjH"),o=n("GnwI"),s=n("sUnt"),l=n("yymn"),d=n("vCsY"),c=n("3aAs"),u=(n("TVuH"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectOnFocus=function(e){e.currentTarget.select(),t.props.onSelection&&t.props.onSelection()},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return a.createElement(s.a,Object(i.__assign)({position:l.n.Relative,className:"selectable-input-wrapper"},Object(d.a)(this.props)),a.createElement(c.a,{type:c.c.Text,value:this.props.text,readOnly:!0,onFocus:this.selectOnFocus,icon:this.props.iconAsset,id:this.props.id}),this.props.children)},t}(a.Component)),p=Object(r.d)(Object(o.withLatencyTracking)("SelectableInput"))(u)},v8tf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsDownloadButton"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"videoQualities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sourceURL"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"query ClipsDownloadButton($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ngame {\nid\nname\n}\nvideoQualities {\nsourceURL\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ClipsDownloadButton=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ClipsDownloadButton")},vUXZ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Clips_DeleteClips"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteClipsInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteClips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clips"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:106}};n.loc.source={body:"mutation Clips_DeleteClips($input: DeleteClipsInput!) {\ndeleteClips(input: $input) {\nclips {\nid\nslug\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Clips_DeleteClips=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Clips_DeleteClips")},vVeY:function(e,t,n){"use strict";function i(e,t){return"https://www.twitch.tv"+function(e,t){return"/"+t+"/clip/"+e}(e,t)}n.d(t,"a",(function(){return i}))},vhpE:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i,a=n("mrSG"),r=n("q1tI"),o=n("wbMx"),s=n("oC+A"),l=n("vVeY"),d=n("+GjP"),c=n("2xye"),u=n("MLDe"),p=n("4L7N"),m=n("yymn"),f=n("sUnt");!function(e){e.MainContainer="main-container",e.DownloadButtonContainer="download-button-container",e.ShareButtonTwitter="share-button-twitter",e.ShareButtonFacebook="share-button-facebook",e.ShareButtonReddit="share-button-reddit",e.ShareButtonEmbed="share-button-embed",e.ShareButtonCopy="share-button-copy"}(i||(i={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e={margin:{right:1}},t={};return this.props.asBalloon&&(t={justifyContent:m.l.Between},e={}),r.createElement(f.a,Object(a.__assign)({className:"clips-social-share",display:m.g.Flex,flexWrap:m.i.NoWrap},t,{"data-test-selector":i.MainContainer}),r.createElement(f.a,Object(a.__assign)({display:m.g.InlineBlock},e,{"data-test-selector":i.DownloadButtonContainer}),r.createElement(p.a,{broadcasterLogin:this.props.clip.broadcaster&&this.props.clip.broadcaster.login||"",broadcasterId:this.props.clip.broadcaster&&this.props.clip.broadcaster.id||"",slug:this.props.clip.slug,pageType:this.props.pageType})),this.renderSocialButton(e,i.ShareButtonTwitter,o.c.Twitter,{tt_medium:"twtr"}),this.renderSocialButton(e,i.ShareButtonFacebook,o.c.Facebook,{tt_medium:"fb"}),this.renderSocialButton(e,i.ShareButtonReddit,o.c.Reddit,{tt_medium:"redt"}),this.renderSocialButton(e,i.ShareButtonEmbed,o.c.Embed),this.renderSocialButton(e,i.ShareButtonCopy,o.c.Copy))},t.prototype.renderSocialButton=function(e,t,n,i){var p=Object(d.g)(this.props.clip.url,i);return this.props.pageType===c.PageviewLocation.ClipsWatchPage&&this.props.clip.broadcaster&&this.props.clip.broadcaster.login&&(p=Object(d.g)(Object(l.a)(this.props.clip.slug,this.props.clip.broadcaster.login),i)),r.createElement(f.a,Object(a.__assign)({key:n},e,{"data-test-selector":t}),r.createElement(o.a,{key:n,type:n,text:this.props.clip.title,clipSlug:this.props.clip.slug,embedModalType:s.b.Clip,url:p,onShareClick:Object(u.c)(this.props.clip.id,this.props.clip.game&&this.props.clip.game.name,this.props.clip.broadcaster&&this.props.clip.broadcaster.id,this.props.clip.broadcaster&&this.props.clip.broadcaster.login,this.props.pageType)}))},t}(r.Component)},wC0O:function(e,t,n){},ygyh:function(e,t,n){}}]);